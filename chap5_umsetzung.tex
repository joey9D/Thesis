Die Umsetzung dieser Arbeit besteht aus mehreren Phase.

Die Entwicklung einer benutzerfreundlichen und leistungsfähigen API-Library erfordert eine systematische Herangehensweise, die die einzelnen Phasen der Anforderungsanalyse, Architekturentwurf, Implementierung, Testing und Dokumentation integriert.
 


Um dieses Problem und die in vorherigem Abschnitt angesprochenen Probleme anzugehen, soll eine neue/weitere Zwischenschicht implementiert werden. 
Die Zwischenschicht wählt zur Kompilierzeit die richtige Hardware aus, damit das nicht zur Runtime geschieht; und bekommt so die richtigen Treiber mit.
Die Zwischenschicht soll eine Art default-Klasse für die jeweilige Funktion bereitstellen.
Mit der ausgewählten Hardware können die Default-Klassen die richtigen Treiber ansprechen.

\section{Anforderungsanalyse}
$\rightarrow$ ein Klasse pro Funktion \\
$\rightarrow$ Auswahl der Hardware muss vorher bestimmt werden $\rightarrow$ cmake target \\
$\rightarrow$  



\section{Einstellungen pro MCU}

%TODO: informations in reference manual for each mcu
% CONFIG Abschnitt im cmake
%\begin{lstlisting}
%add_compile_options(
%	-mcpu=
%	-mfloat-abi=
%	-mfpu=
%	-mthumb
%	-ffunction-sections
%	-fdata-sections
%	$<$<COMPILE_LANGUAGE:CXX>:-fno-exceptions>
%	$<$<COMPILE_LANGUAGE:CXX>:-fno-rtti>
%	$<$<COMPILE_LANGUAGE:CXX>:-fno-threadsafe-statics>
%	$<$<COMPILE_LANGUAGE:CXX>:-fno-use-cxa-atexit>
%)
%\end{lstlisting}

\subsection{STM32C031C6}
\begin{lstlisting}
add_compile_options(
	-mcpu=cortex-m0+
	-mfloat-abi=hard
	-mfpu=
	-mthumb
	-ffunction-sections
	-fdata-sections
	$<$<COMPILE_LANGUAGE:CXX>:-fno-exceptions>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-rtti>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-threadsafe-statics>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-use-cxa-atexit>		
)
\end{lstlisting}


\subsection{STM32G071RB}
\begin{lstlisting}
add_compile_options(
	-mcpu=
	-mfloat-abi=
	-mfpu=
	-mthumb
	-ffunction-sections
	-fdata-sections
	$<$<COMPILE_LANGUAGE:CXX>:-fno-exceptions>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-rtti>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-threadsafe-statics>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-use-cxa-atexit>
)
\end{lstlisting}


\subsection{STM32G0B1RE}
\begin{lstlisting}
add_compile_options(
	-mcpu=
	-mfloat-abi=
	-mfpu=
	-mthumb
	-ffunction-sections
	-fdata-sections
	$<$<COMPILE_LANGUAGE:CXX>:-fno-exceptions>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-rtti>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-threadsafe-statics>
	$<$<COMPILE_LANGUAGE:CXX>:-fno-use-cxa-atexit>
)
\end{lstlisting}

\section{Anpassungen}
































